{% load static %}
{% load i18n %}
<!doctype html>
<html lang="{{ LANGUAGE_CODE }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}AkkaUi{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'core/modern-design.css' %}">
    <link rel="stylesheet" href="{% static 'css/toast.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'Favicon.ico' %}">
    
    <!-- Lucide Icons via CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Alpine.js via CDN -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <!-- Logo -->
        <a href="{% url 'core:home' %}" class="brand">
          <div class="brand-icon">AK</div>
          <span>AkkaUi</span>
        </a>
        
        <!-- Desktop Navigation -->
        <nav class="main-nav">
          <a href="{% url 'core:explore' %}" {% if 'explore' in request.path %}class="active"{% endif %}>{% trans "Explore" %}</a>
          <a href="{% url 'core:pricing' %}" {% if 'pricing' in request.path %}class="active"{% endif %}>{% trans "Pricing" %}</a>
          <a href="{% url 'core:faq' %}" {% if 'faq' in request.path %}class="active"{% endif %}>FAQ</a>
          {% if user.is_authenticated %}
            <a href="{% url 'core:minha_biblioteca' %}" {% if 'minha-biblioteca' in request.path %}class="active"{% endif %}>
              <i data-lucide="book-open" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;"></i>
              {% trans "Library" %}
            </a>
            <a href="{% url 'core:cart' %}" {% if 'cart' in request.path %}class="active"{% endif %} style="position: relative;">
              <i data-lucide="shopping-cart" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;"></i>
              {% trans "Cart" %}
              <span id="cart-badge" class="cart-badge" style="display: none; position: absolute; top: -8px; right: -8px; background: var(--primary); color: var(--color-black); border-radius: 50%; width: 20px; height: 20px; font-size: 0.75rem; font-weight: 700; align-items: center; justify-content: center;">0</span>
            </a>
          {% endif %}
        </nav>
        
        <!-- Actions -->
        <div class="auth-buttons">
          <button onclick="toggleSearch()" class="btn btn-outline" style="padding: 0.5rem;">
            <i data-lucide="search" style="width: 20px; height: 20px;"></i>
          </button>
          
          <!-- Language Selector -->
          <form action="{% url 'set_language' %}" method="post" style="display: inline-block; margin: 0;">
            {% csrf_token %}
            <input name="next" type="hidden" value="{{ request.get_full_path }}">
            <select name="language" onchange="this.form.submit()" class="btn btn-outline" style="padding: 0.5rem 0.75rem; cursor: pointer; appearance: none; background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 12 12%27%3e%3cpath fill=%27%23ffffff%27 d=%27M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z%27/%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.5rem center; padding-right: 2rem;">
              <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>EN</option>
              <option value="pt-br" {% if LANGUAGE_CODE == 'pt-br' %}selected{% endif %}>PT</option>
              <option value="es" {% if LANGUAGE_CODE == 'es' %}selected{% endif %}>ES</option>
              <option value="it" {% if LANGUAGE_CODE == 'it' %}selected{% endif %}>IT</option>
              <option value="zh-hans" {% if LANGUAGE_CODE == 'zh-hans' %}selected{% endif %}>中文</option>
            </select>
          </form>
          
          {% if user.is_authenticated %}
            {% if user.admin %}
              <a href="{% url 'core:admin_svg' %}" class="btn btn-secondary">{% trans "Manage SVG" %}</a>
            {% endif %}
            <a href="{% url 'usuario:profile' %}" class="btn btn-secondary">{{ user.username }}</a>
            <a href="{% url 'usuario:signout' %}" class="btn btn-outline">{% trans "Sign Out" %}</a>
          {% else %}
            <a href="{% url 'usuario:signin' %}" class="btn btn-outline">{% trans "Sign In" %}</a>
            <a href="{% url 'usuario:signup' %}" class="btn btn-primary">{% trans "Sign Up" %}</a>
          {% endif %}
        </div>
        
        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" onclick="toggleMenu()">☰</button>
      </div>
    </header>

    <!-- Mobile Menu -->
    <nav id="mobileNav" style="display: none; background: var(--bg-dark); border-bottom: 1px solid var(--border); padding: 1rem;">
      <div class="container" style="display: flex; flex-direction: column; gap: 0.5rem;">
        <a href="{% url 'core:explore' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Explore" %}</a>
        <a href="{% url 'core:pricing' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Pricing" %}</a>
        <a href="{% url 'core:faq' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">FAQ</a>
        {% if user.is_authenticated %}
          <a href="{% url 'core:minha_biblioteca' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Library" %}</a>
          <a href="{% url 'core:cart' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Cart" %}</a>
          {% if user.admin %}
            <a href="{% url 'core:admin_svg' %}" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">{% trans "Manage SVG" %}</a>
          {% endif %}
          <a href="{% url 'usuario:profile' %}" class="btn btn-secondary" style="width: 100%; justify-content: flex-start;">{% trans "Profile" %}</a>
          <a href="{% url 'usuario:signout' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Sign Out" %}</a>
        {% else %}
          <a href="{% url 'usuario:signin' %}" class="btn btn-outline" style="width: 100%; justify-content: flex-start;">{% trans "Sign In" %}</a>
          <a href="{% url 'usuario:signup' %}" class="btn btn-primary" style="width: 100%; justify-content: flex-start;">{% trans "Sign Up" %}</a>
        {% endif %}
      </div>
    </nav>

    <main>
      {% block content %}
      <!-- Conteúdo da página -->
      {% endblock %}
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-grid">
          <!-- Brand -->
          <div>
            <a href="{% url 'core:home' %}" class="brand" style="margin-bottom: 1.5rem;">
              <div class="brand-icon">AK</div>
              <span>AkkaUi</span>
            </a>
          </div>
          
          <!-- Products -->
          <div class="footer-section">
            <h4>{% trans "Product" %}</h4>
            <ul class="footer-links">
              <li><a href="{% url 'core:pricing' %}">{% trans "Pricing" %}</a></li>
              <li><a href="{% url 'core:explore' %}">{% trans "Explore" %}</a></li>
              <li><a href="{% url 'core:faq' %}">FAQ</a></li>
            </ul>
          </div>
          
          <!-- Resources -->
          <div class="footer-section">
            <h4>{% trans "Resources" %}</h4>
            <ul class="footer-links">
              <li><a href="#">{% trans "Documentation" %}</a></li>
              <li><a href="#">{% trans "Tutorials" %}</a></li>
              <li><a href="#">{% trans "Blog" %}</a></li>
            </ul>
          </div>
          
          <!-- Company -->
          <div class="footer-section">
            <h4>{% trans "Company" %}</h4>
            <ul class="footer-links">
              <li><a href="#">{% trans "About" %}</a></li>
              <li><a href="#">{% trans "Contact" %}</a></li>
              <li><a href="#">{% trans "Terms" %}</a></li>
            </ul>
          </div>
          
          <!-- Social -->
          <div class="footer-section">
            <h4>{% trans "Join the community" %}</h4>
            <p style="color: var(--text-muted); font-size: 0.875rem; margin-bottom: 1rem;">{% trans "Follow us" %}</p>
            <div class="social-links">
              <a href="#" class="social-link" title="Facebook">
                <i data-lucide="facebook" style="width: 16px; height: 16px;"></i>
              </a>
              <a href="#" class="social-link" title="Instagram">
                <i data-lucide="instagram" style="width: 16px; height: 16px;"></i>
              </a>
              <a href="#" class="social-link" title="LinkedIn">
                <i data-lucide="linkedin" style="width: 16px; height: 16px;"></i>
              </a>
              <a href="#" class="social-link" title="YouTube">
                <i data-lucide="youtube" style="width: 16px; height: 16px;"></i>
              </a>
            </div>
          </div>
        </div>
        
        <!-- Large Brand Text -->
        <div class="footer-brand-large">
          akkaui
        </div>
      </div>
    </footer>

    <script>
      // Initialize Lucide icons
      lucide.createIcons();
      
      function toggleMenu() {
        const nav = document.getElementById('mobileNav');
        nav.style.display = nav.style.display === 'none' ? 'block' : 'none';
      }
      
      function toggleSearch() {
        showToast('Funcionalidade de busca em desenvolvimento', 'info');
      }
    </script>
    
    <!-- Toast and Cart Management -->
    <script src="{% static 'js/toast.js' %}"></script>
    <script src="{% static 'js/cart.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
  </body>
</html>
